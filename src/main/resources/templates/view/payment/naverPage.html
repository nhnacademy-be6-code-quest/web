<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>결제하기</title>
  <!-- 네이버페이 결제창 SDK 추가 -->
  <script src="https://nsp.pay.naver.com/sdk/js/naverpay.min.js"></script>
</head>
<body>
<script>
  // 클라이언트 키로 객체 초기화
  var oPay = Naver.Pay.create({
    "mode" : "development", // development or production
    "clientId": "u86j4ripEt8LRfPGzQ8", // clientId
    "chainId": "TDZSUHBoVGRFS2l" // chainId
  });

  // 페이지 로드 시 결제 창 띄우기
  window.onload = function() {
    oPay.open({
      merchantPayKey: `[[${paymentOrderShowRequestDto.getTossOrderId()}]]`,// 주문번호(주문번호는 상점에서 직접 만들어주세요.)
      totalPayAmount: calculateTotalPayAmount(),
      returnUrl: `[[${successUrl}]]`// 결제 성공 시 이동할 페이지
    });
  };

  // 결제 금액 계산 함수
  function calculateTotalPayAmount() {
    var orderTotalAmount = [[${paymentOrderShowRequestDto.getOrderTotalAmount()}]];
    var discountAmountByCoupon = [[${paymentOrderShowRequestDto.getDiscountAmountByCoupon()}]];
    var discountAmountByPoint = [[${paymentOrderShowRequestDto.getDiscountAmountByPoint()}]];
    return orderTotalAmount - discountAmountByCoupon - discountAmountByPoint;
  }
</script>

</body>
</html>
