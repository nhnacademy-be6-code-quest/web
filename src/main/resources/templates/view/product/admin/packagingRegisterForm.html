<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="packagingRegisterFragment ()">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    #preview{
        width: 300px;
        height: 300px;
        border: 1px solid black;
        background: whitesmoke;
        margin-top: 40px;
    }

    .packaging-register-form {
        display: flex;
        flex-direction: column;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        margin-top: 60px;
        background: ghostwhite;
        border: 2px solid deepskyblue;
        max-width: 600px;
    }
    .packaging-register-form input {
        margin: 0 auto 15px;
        width: 200px;
    }

    .myTextarea {
        margin: 0 auto 15px;
        width: 400px;
        height: 100px;
        overflow: scroll;
        /*transition: 1s ease;*/
    }

    .myTextarea:focus {
        position: relative;
        overflow: visible;
        transition: 0.7s ease;
    }

    .packaging-register-form button {
        margin: 0 auto 30px;
        width: 100px;
        border: none;
        background: #007BFF;
        color: whitesmoke;
    }

    .packaging-register-form h2 {
        width: 100%;
        padding: 20px 10px 10px;
        border: none;
        background: #007BFF;
        color: whitesmoke;
    }
    .radio-select-form input{
        margin: 20px;
        width: 30px;
    }
</style>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                document.getElementById('preview').src = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        } else {
            document.getElementById('preview').src = "";
        }
    }
</script>
<body>
<form th:action="'/admin/product/packaging/' + ${action}" method="post" enctype="multipart/form-data">
    <div class="packaging-register-form">
        <h2 th:if="${action eq 'register'}">포장지 등록</h2>
        <h2 th:if="${action eq 'update'}">포장지 수정</h2>
        <div>
            <img id="preview" width="800px"
                 th:src="${packaging == null ? 'https://i.postimg.cc/ydkCbCbC/image-2935360-1280.png' : packaging.packagingImage == 'no image' ? 'https://i.postimg.cc/ydkCbCbC/image-2935360-1280.png' : packaging.packagingImage}"/>
        </div>
        <input type="file" name="image" onchange="readURL(this)" accept="image/jpeg,image/png,image/jpg" th:required="${action == 'register'}" >

        포장지명 <input type="text" name="packagingName" th:value="${packaging == null ? '' : packaging.packagingName}" required>
        상품명 <input type="text" name="productName" th:value="${packaging == null ? '' : packaging.productName}" required>
        <input type="hidden" id="image" name="productThumbnailUrl" th:value="${packaging == null ? 'no image' : packaging.packagingImage}">
            설명 <textarea id="myTextarea" class="myTextarea" name="productDescription" th:text="${packaging == null ? '' : packaging.productDescription}" required></textarea>
        정가 <input type="number" name="productPriceStandard" th:value="${packaging == null ? '' : packaging.productPriceStandard}" min="1" required>
        판매가 <input type="number" name="productPriceSales" th:value="${packaging == null ? '' : packaging.productPriceSales}" min="1" required>
        재고 <input type="number" name="productInventory" th:value="${packaging == null ? '' : packaging.productInventory}" min="1" required>

        <span class="radio-select-form" th:if="${action == 'update'}" >
            <input type="hidden" name="productId" th:value="${packaging.productId}">
            <input type="radio" name="productState" value="0" th:checked="${packaging.productState == 0}">판매
            <input type="radio" name="productState" value="1" th:checked="${packaging.productState == 1}">판매 일시 중지
            <input type="radio" name="productState" value="2" th:checked="${packaging.productState == 2}">판매 영구 중지
            <input type="hidden" name="_method" value="PUT"/>
        </span>
        <button type="submit">
            <span th:text="${action eq 'register' ? '등록' : '수정'}"></span>
        </button>
        </div>
    </form>
</body>
</html>