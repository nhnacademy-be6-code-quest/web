<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="authFragment ('login_message', 'register_message', 'form', 'prev_data')">
<head>
    <meta charset="UTF-8">
    <title></title>

    <link rel="stylesheet" type="text/css" th:href="@{/css/auth/style.css}">

    <script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener('DOMContentLoaded', (event) => {
            const form = /*[[${form}]]*/ 'login';

            if (form === 'register') {
                const container = document.querySelector('.cont');
                container.classList.toggle('s--signup');
                if (container.classList.contains('s--signup')) {
                    container.style.height = '900px';
                } else {
                    container.style.height = '550px';
                }
            }
        });
        /*]]>*/
    </script>
    <style>
        .payco-login {
            margin-top: 10px;
            display: block;
            background-color: #ff684b;
            cursor: pointer;
            color: #FFFFFF;
        }

        .payco-login:hover {
            background-color: #ff582b;
        }
    </style>
</head>
<section id="auth">
    <br>
    <br>
    <br>
    <br>
    <div class="cont">
        <form id = "loginForm" class="form sign-in" action="/login" method="post">
            <h2>로 그 인</h2>
            <label>
                <span >Email</span>
                <input type="email" name="clientEmail" required="required" />
            </label>
            <label>
                <span>Password</span>
                <input type="password" name="clientPassword" required="required" />
            </label>
            <p class="forgot-pass">Forgot password?</p>
            <button type="submit" class="submit">Sign In</button>
            <button type="button" class="submit payco-login" th:onclick="|location.href='@{/payco/login}'|">Payco</button>
<!--            <button type="button" class="submit payco-login" th:onclick="|location.href='@{https://id.payco.com/oauth2.0/authorize?client_id=3RDkRhlndPoNojD5rfh0Joe&redirect_uri=http%3A%2F%2Ftest.com%3A8009%2Fapi%2Fpayco%2Flogin%2Fcallback&response_type=code&serviceProviderCode=FRIENDS&userLocale=ko_KR}'|">Payco</button>-->
            <span th:if="${login_message != null}" class="error-message" th:text="${login_message}" />
        </form>
        <div class="sub-cont">
            <div class="img">
                <div class="img__text m--up">
                    <h3>Don't have an account? Please Sign up!</h3>
                </div>
                <div class="img__text m--in">
                    <h3>If you already has an account, just sign in.</h3>
                </div>
                <div class="img__btn">
                    <span class="m--up">Sign Up</span>
                    <span class="m--in">Sign In</span>
                </div>
            </div>
            <form id="registerForm" class="form sign-up" action="/register" method="post">
                <h2>회 원 가 입</h2>
                <label>
                    <span>Nickname</span>
                    <input type="text" name="clientName" th:value="${prev_data != null ? prev_data.clientName : ''}" />
                </label>
                <label>
                    <span>Email</span>
                    <input type="email" name="clientEmail" th:value="${prev_data != null ? prev_data.clientEmail : ''}" />
                </label>
                <label>
                    <span>Password</span>
                    <input id="password" type="password" name="clientPassword" th:value="${prev_data != null ? prev_data.clientPassword : ''}" />
                </label>
                <label>
                    <span>Confirm Password</span>
                    <input id="confirm-password" type="password" th:value="${prev_data != null ? prev_data.clientPassword : ''}" />
                </label>
                <label>
                    <span>Birthday</span>
                    <input type="date" name="clientBirth" th:value="${prev_data != null ? prev_data.clientBirth : ''}" />
                </label>
                <label>
                    <span>Phone Number</span>
                    <input type="tel" name="clientPhoneNumber" th:value="${prev_data != null ? prev_data.clientPhoneNumber : ''}" />
                </label>
                <button type="submit" class="submit">Sign Up</button>
                <span th:if="${register_message != null}" class="error-message" th:text="${register_message}" />
            </form>
        </div>
    </div>
    <br>
    <br>
    <br>

    <script>
        var password = document.getElementById("password")
        var confirm_password = document.getElementById("confirm-password");

        function validatePassword(){
            if(password.value !== confirm_password.value) {
                confirm_password.setCustomValidity("Passwords Don't Match");
            } else {
                confirm_password.setCustomValidity('');
            }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
    </script>

<script>
    document.querySelector('.img__btn').addEventListener('click', function() {
        const container = document.querySelector('.cont');
        container.classList.toggle('s--signup');
        if (container.classList.contains('s--signup')) {
            container.style.height = '900px';
        } else {
            container.style.height = '550px';
        }
    });
</script>
</section>
</html>